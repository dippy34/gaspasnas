(()=>{"use strict";var e,a={769:(e,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.game=void 0,o(385),o(689),a.game={time_start:0,save_name:"game_45684598674586749857651",engine:null,canvas:null,scene:null,font_name:"Questrial-Regular",canvas2:null,c2d:null,pointer_x:null,envtext:null,sounds:{test1:null,blob:null,crush:null,bonus:null,scene:null},play_sound:null,set_char_state:null,set_range:null,particle_:null,dispose:null,node_move_z:null,player_scale:null,collider1:null,collider2:null,collider3:null,collider4:null,head_body_foot:null,body_foot:null,head_body:null,foot:null,body:null,none:null,touch_plane1:null,touch_plane2:null,touch_plane3:null,touch1:null,Plane:null,bonus:null,particle:null,shadows:null,anim_up:null,player_parent:null,blob:null,rotative:null,spine1:null,colliders_player:null,obstacles:null,blobs:null,rotatives:null,bonus_pieces:null,particles:null,shadow_player:null,LEVEL:0,BONUS_MULT:0,blob_count:0,SCORE:0,blob_count_for_update:0,CURRENT_STATE:null,STATE:"",RUNNING:"RUNNING",WAITING_FOR_RUN:"WAITING_FOR_RUN",BONUS:"BONUS",ENDED:"ENDED",current_color:null}},801:(e,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.add_methods=void 0;const t=o(769),n=o(410),s=o(447);a.add_methods=()=>{t.game.play_sound=function(e){return e.isReady&&e.play(),null},t.game.set_char_state=function(e){t.game.head_body_foot.setEnabled(!1),t.game.body_foot.setEnabled(!1),t.game.head_body.setEnabled(!1),t.game.foot.setEnabled(!1),t.game.body.setEnabled(!1),t.game.none.setEnabled(!1);let a=e,o=Math.floor(Math.random()*a.length);return e[o].setEnabled(!0),t.game.CURRENT_STATE=e[o],null},t.game.set_range=e=>{var a=t.game.scene.skeletons[0].getAnimationRange("run").from,o=t.game.scene.skeletons[0].getAnimationRange("run").to;return t.game.scene.beginAnimation(t.game.scene.skeletons[0],a,o,!0,1),null},t.game.particle_=(e,a)=>{for(var o=0;o<a;o++){var n=new BABYLON.Vector3(0,5,0),s=(BABYLON.Matrix.RotationY(Math.PI),BABYLON.Matrix.RotationAxis(new BABYLON.Vector3(0*Math.random(),Math.random()*Math.PI*0,2*Math.random()-1),Math.random()));n=BABYLON.Vector3.TransformCoordinates(n,s);var l=t.game.particle.clone("np",null);l.position=e.add(new BABYLON.Vector3(.6*Math.random()-.3,.6*Math.random()-.3,.6*Math.random()-.3)),l.physicsImpostor=new BABYLON.PhysicsImpostor(l,BABYLON.PhysicsImpostor.SphereImpostor,{mass:1,group:1,mask:1}),l.physicsImpostor.setLinearVelocity(n)}return null},t.game.dispose=()=>(t.game.scene.stopAllAnimations(),t.game.engine.stopRenderLoop(n.tick),t.game.scene.dispose(),s.load(),null)}},262:(e,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.gui=void 0,o(385),o(689);const t=o(769);a.gui={adv:null,text_score:null,load(){var e=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("ui",!0,t.game.scene);e.idealHeight=800,a.gui.adv=e;var o=new BABYLON.GUI.Rectangle("rectangle1");o.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,o.topInPixels=16,o.cornerRadius=16,o.background="#00000055",o.widthInPixels=250,o.thickness=0,o.heightInPixels=90,e.addControl(o),(n=new BABYLON.GUI.TextBlock("text_block1","0")).fontFamily=t.game.font_name,n.fontSize="50px",n.color="white",a.gui.text_score=n,o.addControl(n),n.topInPixels=-10;var n=new BABYLON.GUI.TextBlock("text_level","level "+BABYLON.DataStorage.ReadNumber(t.game.save_name+"LEVEL",1));e.addControl(n),n.textVerticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_BOTTOM,n.fontFamily=t.game.font_name,(n=new BABYLON.GUI.TextBlock("text_block2","font")).fontFamily=t.game.font_name,n.fontSize="25px",n.color="red",n.topInPixels=30,o.addControl(n),n.outlineColor="black",n.outlineWidth=1,n.shadowColor="black",n.shadowOffsetY=2,n.text="BEST: "+BABYLON.DataStorage.ReadNumber(t.game.save_name+"BEST",0);var s=BABYLON.GUI.Button.CreateImageOnlyButton("but","images/btn1.png");s.width="48px",s.height="48px",s.color="transparent",s.thickness=0,s.background="transparent",s.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,s.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,s.left=16,s.top=16,s.onPointerDownObservable.add((function(){console.log("btn1")}));var l=BABYLON.GUI.Button.CreateSimpleButton("btn_main","PLAY");l.widthInPixels=250,l.heightInPixels=70,e.addControl(l),l.background="#ffffff55",l.topInPixels=300,l.thickness=0,l.cornerRadius=16,l.textBlock.fontFamily=t.game.font_name,l.textBlock.shadowColor="#00000055",l.textBlock.shadowOffsetY=3,l.textBlock.fontSize=30,l.onPointerClickObservable.add(((e,a)=>{t.game.STATE==t.game.WAITING_FOR_RUN?(LaggedAPI.APIAds.show(function() {a.target.isEnabled=!1,a.target.isVisible=!1,t.game.STATE=t.game.RUNNING})):(LaggedAPI.APIAds.show(function() {console.log("ad completed")}),t.game.scene.render(),t.game.dispose())}))}}},607:(e,a,o)=>{o(385);const t=o(769),n=o(447),s=o(300),l=o(801);s.window_onload((function(){t.game.canvas2=document.createElement("canvas"),t.game.c2d=t.game.canvas2.getContext("2d"),t.game.c2d.font="30px "+t.game.font_name,t.game.c2d.strokeText("text",0,0),t.game.canvas=document.getElementById("canvas"),t.game.engine=new BABYLON.Engine(t.game.canvas),t.game.engine.disableUniformBuffers=!0,t.game.engine.displayLoadingUI=function(){},window.addEventListener("resize",(function(){t.game.engine.resize()})),l.add_methods(),n.load()}),t.game)},447:(e,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.load=void 0;const t=o(769);o(385),o(689);const n=o(410),s=o(262);var l,m;function r(){if(++l==m){t.game.scene.fogMode=BABYLON.Scene.FOGMODE_LINEAR,t.game.scene.fogStart=17,t.game.scene.fogEnd=23,t.game.scene.fogColor=new BABYLON.Color3(1,1,1),t.game.blob_count=0,t.game.SCORE=0,t.game.blob_count_for_update=0,t.game.STATE=t.game.WAITING_FOR_RUN,t.game.BONUS_MULT=0,t.game.scene.onReadyObservable.add((()=>{document.getElementById("lock_loader").style.visibility="hidden"})),t.game.scene.meshes.forEach((e=>{t.game[e.name]=e,e.isPickable=!1}));var e=t.game.scene.getMaterialByName("bonus_mat3");e.emissiveColor=new BABYLON.Color3(1,1,1),e.emissiveIntensity=1,t.game.current_color=t.game.scene.getMaterialByName("color"+(Math.floor(6*Math.random())+1)),t.game.blob.material=t.game.current_color,t.game.particle.material=t.game.current_color,t.game.body.material=t.game.current_color,t.game.body_foot.material=t.game.current_color,t.game.foot.material=t.game.current_color,t.game.head_body.material=t.game.current_color,t.game.head_body_foot.material=t.game.current_color,t.game.none.material=t.game.current_color,t.game.particles=new Array,t.game.scene.getMeshesByTags("pickable").forEach((e=>{e.isPickable=!0})),t.game.anim_up.scaling=new BABYLON.Vector3(1,1,1),t.game.head_body_foot.setParent(t.game.anim_up),t.game.body_foot.setParent(t.game.anim_up),t.game.head_body.setParent(t.game.anim_up),t.game.foot.setParent(t.game.anim_up),t.game.body.setParent(t.game.anim_up),t.game.none.setParent(t.game.anim_up),t.game.shadow_player.setParent(t.game.anim_up),t.game.head_body_foot.rotation.y=Math.PI,t.game.head_body.rotation.y=Math.PI,t.game.body_foot.rotation.y=Math.PI,t.game.body.rotation.y=Math.PI,t.game.foot.rotation.y=Math.PI,t.game.touch_plane1.setParent(t.game.node_move_z),t.game.touch_plane2.setParent(t.game.node_move_z),t.game.touch_plane3.setParent(t.game.node_move_z),t.game.body.position.y=-.22,t.game.head_body.position.y=-.22,t.game.set_range("run"),t.game.set_char_state([t.game.none]),t.game.scene.getMeshesByTags("invisible||novisible").forEach((e=>{e.visibility=0})),t.game.scene.getMeshesByTags("dispose").forEach((e=>{e.dispose()})),t.game.scene.getMeshByName("p1").dispose();var a=t.game.scene.getMeshesByTags("creator"),o=0,r=a;for(let e=r.length-1;e>0;e--){const a=Math.floor(Math.random()*(e+1));[r[e],r[a]]=[r[a],r[e]]}for(var g=0,i=Math.round(1*Math.random()),c=BABYLON.DataStorage.ReadNumber(t.game.save_name+"LEVEL",1),d=Math.min(30,c),_=10+Math.round(d/3),u=_,b=_/3,h=(i=Math.round(Math.random()*(u-b)+b),new BABYLON.Vector3(0,0,2)),p=(o=0,[]);i>g&&o<=a.length;){var y=a[o],B=y.getChildMeshes();y.position=h.clone(),B.forEach((e=>{p.push(e),e.setParent(null),BABYLON.Tags.MatchesQuery(e,"collider1_creator")&&(t.game.collider1.clone("",null).position=e.absolutePosition.clone()),BABYLON.Tags.MatchesQuery(e,"collider2_creator")&&(t.game.collider2.clone("",null).position=e.absolutePosition.clone()),BABYLON.Tags.MatchesQuery(e,"collider3_creator")&&(t.game.collider3.clone("",null).position=e.absolutePosition.clone()),BABYLON.Tags.MatchesQuery(e,"collider4_creator")&&(t.game.collider4.clone("",null).position=e.absolutePosition.clone()),BABYLON.Tags.MatchesQuery(e,"blob_creator")&&(g++,t.game.blob.clone("",null).position=e.absolutePosition.clone().add(new BABYLON.Vector3(0,0,0))),BABYLON.Tags.MatchesQuery(e,"end_creator")&&(h=e.absolutePosition.clone())})),o++}t.game.bonus.position=h.clone(),p.forEach((e=>{e.dispose()})),a.forEach((e=>{e.dispose()})),t.game.scene.getMeshesByTags("obstacle").forEach((e=>{e.visibility=0})),t.game.blobs=t.game.scene.getMeshesByTags("blob"),t.game.bonus_pieces=t.game.scene.getMeshesByTags("bonus_piece"),t.game.scene.getMeshesByTags("player_state").forEach((e=>{e.position.x=0})),t.game.scene.cameras[0].parent=t.game.node_move_z,t.game.player_parent.parent=t.game.node_move_z,t.game.anim_up.setParent(t.game.player_parent),t.game.scene.environmentTexture=t.game.envtext,t.game.scene.environmentIntensity=.5,t.game.scene.clearColor=new BABYLON.Color4(1,1,1,1),t.game.colliders_player=t.game.scene.getMeshesByTags("collider_player"),t.game.obstacles=t.game.scene.getMeshesByTags("obstacle"),t.game.rotatives=t.game.scene.getMeshesByTags("rotative"),s.gui.load(),t.game.scene.onPointerDown=()=>{t.game.pointer_x=t.game.scene.pointerX},t.game.scene.onPointerMove=()=>{t.game.pointer_x=t.game.scene.pointerX},t.game.engine.runRenderLoop(n.tick)}}a.load=function(){l=0,m=3,BABYLON.SceneLoader.Load("3d/","root_game.babylon",t.game.engine,(function(e){t.game.scene=e;var a=new BABYLON.Vector3(0,-30,0);e.enablePhysics(a,new BABYLON.AmmoJSPlugin),r();var o=new BABYLON.AssetsManager(t.game.scene);o.addHDRCubeTextureTask("hrd1","3d/env_min.hdr",128).onSuccess=function(e){t.game.envtext=e.texture},BABYLON.SceneLoader.ImportMesh("","3d/","player.babylon",e,(function(e,a,o){r()})),o.load(),o.onFinish=function(){r()}})),null==t.game.sounds.scene&&(t.game.sounds.scene=new BABYLON.Scene(t.game.engine),t.game.sounds.test1=new BABYLON.Sound("","sounds/test1.wav"),t.game.sounds.blob=new BABYLON.Sound("","sounds/blob.wav"),t.game.sounds.crush=new BABYLON.Sound("","sounds/crush.wav"),t.game.sounds.bonus=new BABYLON.Sound("","sounds/bonus.wav"))}},410:(e,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.tick=void 0,o(385),o(689);const t=o(769),n=o(262);a.tick=function(){if(timeplaying=(new Date).getTime()/1e3-t.game.time_start,ontick(),null!=t.game.pointer_x){let a=t.game.pointer_x,o=t.game.scene.pointerY;var e=t.game.scene.pick(a,o);e.hit&&(t.game.touch1.setParent(null),t.game.touch1.position=e.pickedPoint.clone(),"touch_plane1"!=e.pickedMesh.name&&(t.game.touch1.position=e.pickedMesh.absolutePosition.clone()),t.game.touch1.setParent(t.game.touch_plane1))}var a=1.53,o=Math.min(t.game.engine.getDeltaTime(),45);t.game.STATE==t.game.WAITING_FOR_RUN&&(a=0,t.game.touch1.position.x=0,t.game.touch1.computeWorldMatrix(!0)),t.game.STATE==t.game.RUNNING&&t.game.node_move_z.position.z>t.game.bonus.position.z&&(t.game.STATE=t.game.BONUS),t.game.STATE==t.game.BONUS&&(t.game.touch1.position.x=0,t.game.touch1.computeWorldMatrix(!0)),t.game.STATE==t.game.ENDED&&(a=0,t.game.touch1.position.x=0,t.game.touch1.computeWorldMatrix(!0)),t.game.node_move_z.position.z+=o/1e3*a,t.game.player_parent.position.x+=-.1*(t.game.player_parent.position.x-t.game.touch1.absolutePosition.x),t.game.scene.cameras[0].position.x=.3*t.game.player_parent.position.x;var s=!1,l=!1,m=!1;t.game.CURRENT_STATE.getChildMeshes().forEach((e=>{t.game.obstacles.forEach((a=>{a.intersectsMesh(e)&&null==a.metadata&&(a.metadata={used:1},t.game.sounds.crush.play(),s=BABYLON.Tags.MatchesQuery(e,"collider_head"),m=BABYLON.Tags.MatchesQuery(e,"collider_foot"),l=BABYLON.Tags.MatchesQuery(e,"collider_body"),(s||l||m)&&t.game.particle_(e.absolutePosition,20))})),t.game.blobs.forEach((a=>{a.intersectsMesh(e)&&!a.isDisposed()&&(t.game.scene.beginAnimation(t.game.anim_up,0,14,!1),a.dispose(),t.game.sounds.blob.play(),t.game.blob_count++,t.game.SCORE++,n.gui.text_score.text=""+t.game.SCORE,t.game.blob_count_for_update++,t.game.blob_count_for_update>=5&&(t.game.blob_count_for_update=0,t.game.CURRENT_STATE==t.game.none?t.game.set_char_state([t.game.foot,t.game.body]):t.game.CURRENT_STATE==t.game.foot?t.game.set_char_state([t.game.body_foot]):t.game.CURRENT_STATE==t.game.body?t.game.set_char_state([t.game.head_body,t.game.body_foot]):(t.game.CURRENT_STATE==t.game.head_body||t.game.CURRENT_STATE==t.game.body_foot)&&t.game.set_char_state([t.game.head_body_foot])))})),t.game.bonus_pieces.forEach((a=>{if(a.intersectsMesh(e)&&!a.isDisposed()&&(t.game.BONUS_MULT++,t.game.sounds.bonus.play(),t.game.particle_(a.absolutePosition.add(new BABYLON.Vector3(0,.51,0)),30),n.gui.text_score.text=""+t.game.SCORE*t.game.BONUS_MULT,t.game.blob_count-=2,a.dispose(),t.game.blob_count<=0)){var o=BABYLON.DataStorage.ReadNumber(t.game.save_name+"LEVEL",1);winlevel(o);BABYLON.DataStorage.WriteNumber(t.game.save_name+"LEVEL",o+1),t.game.STATE=t.game.ENDED,t.game.CURRENT_STATE.visibility=0,t.game.shadow_player.visibility=0;var s=BABYLON.DataStorage.ReadNumber(t.game.save_name+"BEST",0);s=Math.max(s,t.game.SCORE*t.game.BONUS_MULT),BABYLON.DataStorage.WriteNumber(t.game.save_name+"BEST",s);var l=n.gui.adv.getControlByName("btn_main");l.isEnabled=!0,l.isVisible=!0,l.textBlock.text="NEXT"}}))})),t.game.obstacles.forEach((e=>{null!=e.metadata&&1==e.metadata.used&&(e.metadata.used=2)})),m&&l&&s&&t.game.CURRENT_STATE==t.game.head_body_foot&&t.game.set_char_state([t.game.body_foot,t.game.head_body]),!m&&l&&s&&(t.game.CURRENT_STATE==t.game.head_body_foot?t.game.set_char_state([t.game.body_foot]):t.game.CURRENT_STATE==t.game.head_body&&t.game.set_char_state([t.game.none,t.game.body])),m&&l&&!s&&(t.game.CURRENT_STATE==t.game.head_body_foot?t.game.set_char_state([t.game.head_body]):t.game.CURRENT_STATE==t.game.body_foot&&t.game.set_char_state([t.game.none,t.game.foot])),!m||l||s||(t.game.CURRENT_STATE==t.game.head_body_foot?t.game.set_char_state([t.game.head_body]):t.game.CURRENT_STATE==t.game.body_foot?t.game.set_char_state([t.game.body]):t.game.CURRENT_STATE==t.game.foot&&t.game.set_char_state([t.game.none])),m||l||!s||(t.game.CURRENT_STATE==t.game.head_body_foot?t.game.set_char_state([t.game.body_foot]):t.game.CURRENT_STATE==t.game.head_body&&t.game.set_char_state([t.game.body])),m||!l||s||(t.game.CURRENT_STATE==t.game.head_body_foot?t.game.set_char_state([t.game.body_foot,t.game.head_body]):t.game.CURRENT_STATE==t.game.body_foot?t.game.set_char_state([t.game.foot]):t.game.CURRENT_STATE==t.game.head_body?t.game.set_char_state([t.game.body]):t.game.CURRENT_STATE==t.game.body&&t.game.set_char_state([t.game.none])),(m||l||s)&&(t.game.blob_count-=5),t.game.blob_count=Math.min(t.game.blob_count,20),t.game.blob_count=Math.max(t.game.blob_count,0);var r=1+.025*t.game.blob_count,g=t.game.player_parent.scaling.x;r=g+.1*(r-g),t.game.player_parent.scaling=new BABYLON.Vector3(1,1,1).scale(r),t.game.rotatives.forEach((e=>{e.rotate(new BABYLON.Vector3(0,0,1),.003*o)})),t.game.scene.render()}},300:(e,a,o)=>{function t(e,a){window.addEventListener("DOMContentLoaded",(function(){void 0!==window.Ammo?Ammo().then((function(){onwindowload(),a.time_start=(new Date).getTime()/1e3,e()})):e()}))}o.r(a),o.d(a,{window_onload:()=>t})}},o={};function t(e){var n=o[e];if(void 0!==n)return n.exports;var s=o[e]={exports:{}};return a[e].call(s.exports,s,s.exports,t),s.exports}t.m=a,e=[],t.O=(a,o,n,s)=>{if(!o){var l=1/0;for(g=0;g<e.length;g++){for(var[o,n,s]=e[g],m=!0,r=0;r<o.length;r++)(!1&s||l>=s)&&Object.keys(t.O).every((e=>t.O[e](o[r])))?o.splice(r--,1):(m=!1,s<l&&(l=s));m&&(e.splice(g--,1),a=n())}return a}s=s||0;for(var g=e.length;g>0&&e[g-1][2]>s;g--)e[g]=e[g-1];e[g]=[o,n,s]},t.d=(e,a)=>{for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};t.O.j=a=>0===e[a];var a=(a,o)=>{var n,s,[l,m,r]=o,g=0;for(n in m)t.o(m,n)&&(t.m[n]=m[n]);for(r&&r(t),a&&a(o);g<l.length;g++)s=l[g],t.o(e,s)&&e[s]&&e[s][0](),e[l[g]]=0;t.O()},o=self.webpackChunkname=self.webpackChunkname||[];o.forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o))})();var n=t.O(void 0,[689],(()=>t(607)));n=t.O(n)})();
